{#
Minarca disk space rdiffweb plugin

Copyright (C) 2015 Patrik Dufresne Service Logiciel inc. All rights reserved.
Patrik Dufresne Service Logiciel PROPRIETARY/CONFIDENTIAL.
Use is subject to license terms.
#}
{% if minarca_disk_space and not error %}
{# Force usage of a different translation domain #}
{% with _t = load_translation("minarca_disk_space_messages"), gettext = _t.ugettext, ngettext = _t.ungettext %}
<div itemscope
    itemtype="https://schema.org/Filesystem"
    class="well well-sm">
  <meta itemprop="freeSpace" content="{{ minarca_disk_space.avail }}" />
  <meta itemprop="occupiedSpace" content="{{ minarca_disk_space.used }}" />
  <meta itemprop="totalSpace" content="{{ minarca_disk_space.size }}" />
  {% set used_pct = minarca_disk_space.used / minarca_disk_space.size * 100 %}
  {% set used_str = minarca_disk_space.used | filesize %}
  {% set size_str = minarca_disk_space.size | filesize %}
  {% set avail_str = minarca_disk_space.avail | filesize %}
  <b>{% trans %}Usage{% endtrans %}</b>
  {% trans used=used_str, avail=avail_str, size=size_str%}{{ used }} used | {{ size }} total | {{ avail }} free{% endtrans %}
  <div class="progress">
    <div class="progress-bar {% if used_pct > 90 %}progress-bar-warning{% else %}progress-bar-info{% endif %}"
         role="progressbar"
         aria-valuenow="{{ used_pct }}"
         aria-valuemin="0"
         aria-valuemax="100"
         style="width: {{ used_pct }}%">
    </div>
  </div>
</div>
{% endwith %}
{% endif %}